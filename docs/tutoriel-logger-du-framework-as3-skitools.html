<!DOCTYPE html>
<html lang="fr" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Tutoriel - Logger du framework AS3 Skitools | Skitoo</title>
<meta name="keywords" content="Code" />
<meta name="description" content="Voilà bientôt un an et demi que je développe en AS3 dans un cadre professionnel. Au cour de mon apprentissage sur la technologie Flash, j&rsquo;ai développé un framework contenant plusieurs outils. Celui-ci répond au doux nom de Skitools et il est hébergé sur un dépôt Mercurial du fabuleux site Bitbucket. Afin d&rsquo;en faire profiter le plus grand nombre de personnes, j&rsquo;ai décidé de me lancer dans une série de tutoriels expliquant les différentes briques du framework.">
<meta name="author" content="">
<link rel="canonical" href="https://www.skitoo.net/tutoriel-logger-du-framework-as3-skitools.html" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.6f60056d44d3f7eb69a4bc6c332b59960f3a995802bded244750232f33713c49.css" integrity="sha256-b2AFbUTT9&#43;tppLxsMytZlg86mVgCve0kR1AjLzNxPEk=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://www.skitoo.net/skitoo-icon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.skitoo.net/skitoo-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.skitoo.net/skitoo-icon.png">
<link rel="apple-touch-icon" href="https://www.skitoo.net/skitoo-icon.png">
<link rel="mask-icon" href="https://www.skitoo.net/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.89.4" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Tutoriel - Logger du framework AS3 Skitools" />
<meta property="og:description" content="Voilà bientôt un an et demi que je développe en AS3 dans un cadre professionnel. Au cour de mon apprentissage sur la technologie Flash, j&rsquo;ai développé un framework contenant plusieurs outils. Celui-ci répond au doux nom de Skitools et il est hébergé sur un dépôt Mercurial du fabuleux site Bitbucket. Afin d&rsquo;en faire profiter le plus grand nombre de personnes, j&rsquo;ai décidé de me lancer dans une série de tutoriels expliquant les différentes briques du framework." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.skitoo.net/tutoriel-logger-du-framework-as3-skitools.html" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-08-15T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2010-08-15T00:00:00&#43;00:00" /><meta property="og:site_name" content="Skitoo" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Tutoriel - Logger du framework AS3 Skitools"/>
<meta name="twitter:description" content="Voilà bientôt un an et demi que je développe en AS3 dans un cadre professionnel. Au cour de mon apprentissage sur la technologie Flash, j&rsquo;ai développé un framework contenant plusieurs outils. Celui-ci répond au doux nom de Skitools et il est hébergé sur un dépôt Mercurial du fabuleux site Bitbucket. Afin d&rsquo;en faire profiter le plus grand nombre de personnes, j&rsquo;ai décidé de me lancer dans une série de tutoriels expliquant les différentes briques du framework."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://www.skitoo.net/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Tutoriel - Logger du framework AS3 Skitools",
      "item": "https://www.skitoo.net/tutoriel-logger-du-framework-as3-skitools.html"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Tutoriel - Logger du framework AS3 Skitools",
  "name": "Tutoriel - Logger du framework AS3 Skitools",
  "description": "Voilà bientôt un an et demi que je développe en AS3 dans un cadre professionnel. Au cour de mon apprentissage sur la technologie Flash, j\u0026rsquo;ai développé un framework contenant plusieurs outils. Celui-ci répond au doux nom de Skitools et il est hébergé sur un dépôt Mercurial du fabuleux site Bitbucket. Afin d\u0026rsquo;en faire profiter le plus grand nombre de personnes, j\u0026rsquo;ai décidé de me lancer dans une série de tutoriels expliquant les différentes briques du framework.",
  "keywords": [
    "Code"
  ],
  "articleBody": "Voilà bientôt un an et demi que je développe en AS3 dans un cadre professionnel. Au cour de mon apprentissage sur la technologie Flash, j’ai développé un framework contenant plusieurs outils. Celui-ci répond au doux nom de Skitools et il est hébergé sur un dépôt Mercurial du fabuleux site Bitbucket. Afin d’en faire profiter le plus grand nombre de personnes, j’ai décidé de me lancer dans une série de tutoriels expliquant les différentes briques du framework. Aujourd’hui nous parlerons du Logger. Le logger de Skitools est fortement inspiré du très connu système de journalisation Log4j du monde Java. Tout comme ce dernier, Skitools offre un système hautement configurable, que ce soit au niveau des entrées d’enregistrements que la destination de ces derniers.\nLogger Le logger est l’entité de base du système de journalisation. Il est représenté par la classe org.skitools.logger.Logger.\npackage { import org.skitools.logger.Logger; public class MaClasse { private static var logger : Logger = Logger.getLogger(MaClasse); } } Comme vous pouvez le voir la déclaration d’un logger est très simple. Elle s’éffectue par la méthode statique Logger.getLogger. Celle-ci prend en paramètre le nom de la classe émettrice d’enregistrement. Vous pouvez donner un nom différent mais il est préférable d’utiliser la classe qui sera utilisée par le système de hiérarchie et de configuration.\nLes niveaux de journalisation Tout comme Log4J, Skitools dispose d’une notion de niveau de journalisation. La classe org.skitools.logger.Level permet de définir l’importance du message à journaliser. Lors de la configuration, il est possible de spécifier des filtres pour chaque logger. Ainsi, le message sera journalisé uniquement si le niveau de votre message est supérieur ou égal au niveau du filtre associé à ce même logger. Skitools propose 5 niveaux de journalisation :\n DEBUG - Utilisé pour déboguer l’application INFO - Utilisé pour informer l’utilisateur du bon déroulement de l’application WARN - Cette avertissement indique une incohérence dans l’application qui peut être liée à un problème de configuration. Des fonctionnements inattendus peuvent surgir. ERROR - Indique qu’une erreur s’est produite. Celle-ci n’entraînant pas l’arrêt du fonctionnement de l’application. FATAL - Indique qu’une erreur très grave c’est produite. Empêchant ainsi l’application de continuer à fonctionner.  Deux autres niveaux de journalisation existent dans Skitools. Cependant ils ne sont utilisés que lors de la configuration du système :\n OFF - Indique qu’aucun message n’est journalisé. ALL - Indique que tous les messages sont journalisés.  Bien-sûr, ces niveaux sont proposés de base dans Skitools, mais rien ne vous empêche de créer les vôtres.\nJournalisation d’un message Pour journaliser un message plusieurs méthodes de l’objet Logger s’offrent à vous :\nlogger.log(Level.DEBUG, \"petit message de débug\"); // la même chose via la méthode debug logger.debug(\"petit message de débug\"); Bien-sûr ces deux fonctionnements sont applicables pour les 4 autres niveaux : INFO, WARN, ERROR, et FATAL. Il est possible de spécifier un objet IFormatter pour un message en particulier. Nous verrons ce que sont les formatters dans la suite de cet article.\nSorties d’écriture du système de journalisation Nous avons vu comment créer des messages associés à un niveau. Maintenant voyons comment les envoyer vers les différentes sorties d’écritures proposées par Skitools. Ces sorties sont représentées par l’interface org.skitools.logger.layout.ILayout. A ce jour 4 implémentations sont fournies avec Skitools :\n org.skitools.logger.layout.TraceLayout - Les messages sont envoyés vers la méthode trace de Flash. Le plugin FlashTracer de Firefox vous permet de récupérer la sortie en écriture de la fonction trace. org.skitools.logger.layout.AirLoggerLayout - Les messages sont envoyés vers l’application Air AirLogger développé par Cédric Néhémie (un ancien collègue de chez Prizee). org.skitools.logger.layout.FlashInspectorLayout - Les messages sont envoyés vers l’application Flash FlashInspector développé par Pablo Constantini. org.skitools.logger.layout.FireBugLayout - Les messages sont envoyés vers l’incontournable plugin FireBug de Firefox. Bien entendu votre SWF doit être lu via le navigateur pour que les messages apparaissent dans le module “Console” du plugin.  Nous verrons dans la suite de l’article la mise en place de ces différents layouts.\nMise en forme des messages Skitools permet de formater les messages de journalisation. Cette action se réalise avant leur envoi vers un layout. La mise en forme des messages se fait par les classes implémentant l’interface org.skitools.logger.formatter.IFormatter. Ces objets sont associés aux layouts. Skitools vous propose 2 formatters :\n org.skitools.logger.formatter.SimpleFormatter - Un formatter très simple : il passe au layout le corps du message tel qui l’est. Ce formatter est utilisé par défaut par tous les layouts. org.skitools.logger.formatter.PatternFormatter - Ce formatter est plus avancé dans son fonctionnement. Celui-ci prend en paramètre de son constructeur un pattern (sous forme de String) qui va définir la forme que va prendre le message une fois envoyé au layout.  Exemple pour le pattern %L [%C] %M\nvar logger : Logger = Logger.getLogger(\"root\"); logger.debug(\"Message A\"); logger.warn(\"Message B\"); résultat :\nDEBUG [root] Message A WARN [root] Message B Tableau récapitulatif des balises :\n   Balise Résultat     %C Le nom du logger émetteur du message   %D La date d’émission du message. Cette balise est un peu particulière car elle accepte une option : %D{dd/MM/yyyy - HH:mm:ss} Cette option permet de spécifier comme la date sera affichée. Cette option est analysée à l’aide la classe org.skitools.utils.DateFormatter je vous conseille donc de jeter un coup d’oeil à la documentation de cette dernière   %L Le niveau du message   %M Le corps du message    L’héritage des niveaux Dans Skitools chaque Logger hérite du Level de son parent à moins bien sur qu’on lui est explicitement spécifié un Level. Seul le logger “root”, défini par le système, ne possède pas de parent. Ce qui induit que par défaut tous les logger héritent du Level du “root”. Prenons l’exemple suivant :\nDans cet exemple nous spécifions que root à le niveau WARN. Ses héritiers (org et org.skitools) héritent tous de ce même level. En spécifiant que **org.skitools.mvc **à un niveau d'INFO on casse la chaîne d’héritage, donc lui et ses héritiers (org.skitools.mvc.view) auront le niveau INFO. com.scopart.utils devrait par défaut avoir le niveau WARN (héritage de root), mais comme pour **org.skitools.mvc **on casse la chaîne d’héritage en spécifiant FATAL comme niveau. Si com.scopart.utils a un jour des enfants, ils hériteront donc de ce même niveau.\nVoyons maintenant ce qui se passe si par exemple le logger org.skitools émet un message :\n Les messages DEBUG et INFO ne seront pas journalisés car ils possèdent un niveau inférieur à celui spécifié dans org.skitools (WARN). Les messages WARN, ERROR et FATAL seront journalisés car ils sont supérieur ou égal à celui spécifié dans org.skitools.  Configuration du système de journalisation Voici un petit exemple de configuration du système de journalisation de Skitools :\npackage com.scopart { import org.skitools.logger.Level; import org.skitools.logger.Logger; import org.skitools.logger.Logging; import org.skitools.logger.formatter.PatternFormatter; import org.skitools.logger.layout.FirebugLayout; import org.skitools.logger.layout.TraceLayout; import flash.display.Sprite; public class MaClasse extends Sprite { private static var logger : Logger = Logger.getLogger(MaClasse); public function MaClasse() { var logging : Logging = Logging.getInstance(); // enregistrement d'un TraceLayout dans le système.  // Il utilisera par défaut org.skitools.logger.formatter.SimplementFormatter  logging.addLayout(new TraceLayout()); // enregistrement d'un FirebugLayout dans le système.  // Il utilisera un PatternFormatter pour mettre en forme les messages  logging.addLayout(new FirebugLayout(new PatternFormatter(\"%L [%C] %M\"))); // on spécifie un level pour le logger MaClasse  Logger.getLogger(MaClasse).setLevel(Level.ERROR); // ce message ne sera journalisé car inférieur  // à ERROR spécifié dans le Logger  logger.debug(\"message 1\"); // les deux messages suivant seront journalisé  // car supérieur ou égal à ERROR  logger.error(\"message 2\"); logger.fatal(\"message 3\"); } } } Conclusion Ce tutoriel touche à sa fin, j’espère qu’il vous aura permis de mieux appréhender le système de journalisation proposé par Skitools. Un tutoriel sur la partie MVC devrait voir le jour d’ici peu. Si vous avez des corrections ou suggestions concernant cet article ou le framework Skitools, merci de me les faire parvenir en commentaire.\n",
  "wordCount" : "1262",
  "inLanguage": "fr",
  "datePublished": "2010-08-15T00:00:00Z",
  "dateModified": "2010-08-15T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.skitoo.net/tutoriel-logger-du-framework-as3-skitools.html"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Skitoo",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.skitoo.net/skitoo-icon.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.skitoo.net" accesskey="h" title="Skitoo (Alt + H)">Skitoo</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.skitoo.net/journal.html" title="Journal">
                    <span>Journal</span>
                </a>
            </li>
            <li>
                <a href="https://www.skitoo.net/projets.html" title="Projets">
                    <span>Projets</span>
                </a>
            </li>
            <li>
                <a href="https://www.skitoo.net/photos.html" title="Photos">
                    <span>Photos</span>
                </a>
            </li>
            <li>
                <a href="https://www.skitoo.net/conferences.html" title="Conférences">
                    <span>Conférences</span>
                </a>
            </li>
            <li>
                <a href="https://www.skitoo.net/a-propos.html" title="A propos">
                    <span>A propos</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Tutoriel - Logger du framework AS3 Skitools
    </h1>
    <div class="post-meta"><span title='2010-08-15 00:00:00 +0000 UTC'>August 15, 2010</span>

</div>
  </header> 
  <div class="post-content"><p>Voilà bientôt un an et demi que je développe en AS3 dans un cadre
professionnel. Au cour de mon apprentissage sur la technologie Flash,
j&rsquo;ai développé un framework contenant plusieurs outils. Celui-ci répond
au doux nom de <a href="http://bitbucket.org/skitoo/skitools/wiki/Home">Skitools</a> et il est hébergé sur un dépôt <a href="http://mercurial.selenic.com">Mercurial</a>
du fabuleux site <a href="http://bitbucket.org">Bitbucket</a>. Afin d&rsquo;en faire profiter le plus grand
nombre de personnes, j&rsquo;ai décidé de me lancer dans une série de
tutoriels expliquant les différentes briques du framework. Aujourd&rsquo;hui
nous parlerons du Logger. Le logger de Skitools est fortement inspiré du
très connu système de journalisation <a href="http://logging.apache.org/log4j/1.2/">Log4j</a> du monde Java. Tout comme
ce dernier, Skitools offre un système hautement configurable, que ce
soit au niveau des entrées d&rsquo;enregistrements que la destination de ces
derniers.</p>
<h2 id="logger">Logger<a hidden class="anchor" aria-hidden="true" href="#logger">#</a></h2>
<p>Le logger est l&rsquo;entité de base du système de journalisation. Il est
représenté par la classe <strong>org.skitools.logger.Logger</strong>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-actionscript" data-lang="actionscript"><span style="color:#66d9ef">package</span>
{
    <span style="color:#66d9ef">import</span> <span style="color:#a6e22e">org</span>.<span style="color:#a6e22e">skitools</span>.<span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">Logger</span><span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MaClasse</span>
    {
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">logger</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">Logger</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Logger</span>.<span style="color:#a6e22e">getLogger</span>(<span style="color:#a6e22e">MaClasse</span>);
    }
}
</code></pre></div><p>Comme vous pouvez le voir la déclaration d&rsquo;un logger est très simple.
Elle s&rsquo;éffectue par la méthode statique <strong>Logger.getLogger</strong>. Celle-ci
prend en paramètre le nom de la classe émettrice d&rsquo;enregistrement. Vous
pouvez donner un nom différent mais il est préférable d&rsquo;utiliser la
classe qui sera utilisée par le système de hiérarchie et de
configuration.</p>
<h2 id="les-niveaux-de-journalisation">Les niveaux de journalisation<a hidden class="anchor" aria-hidden="true" href="#les-niveaux-de-journalisation">#</a></h2>
<p>Tout comme Log4J, Skitools dispose d&rsquo;une notion de niveau de
journalisation. La classe <strong>org.skitools.logger.Level</strong> permet de
définir l&rsquo;importance du message à journaliser. Lors de la configuration,
il est possible de spécifier des filtres pour chaque logger. Ainsi, le
message sera journalisé uniquement si le niveau de votre message est
supérieur ou égal au niveau du filtre associé à ce même logger. Skitools
propose 5 niveaux de journalisation :</p>
<ul>
<li><strong>DEBUG</strong> - Utilisé pour déboguer l&rsquo;application</li>
<li><strong>INFO</strong> - Utilisé pour informer l&rsquo;utilisateur du bon déroulement de l&rsquo;application</li>
<li><strong>WARN</strong> - Cette avertissement indique une incohérence dans l&rsquo;application qui peut être liée à un problème de configuration. Des fonctionnements inattendus peuvent surgir.</li>
<li><strong>ERROR</strong> - Indique qu&rsquo;une erreur s&rsquo;est produite. Celle-ci n&rsquo;entraînant pas l&rsquo;arrêt du fonctionnement de l&rsquo;application.</li>
<li><strong>FATAL</strong> - Indique qu&rsquo;une erreur très grave c&rsquo;est produite. Empêchant ainsi l&rsquo;application de continuer à fonctionner.</li>
</ul>
<p>Deux autres niveaux de journalisation existent dans Skitools. Cependant
ils ne sont utilisés que lors de la configuration du système :</p>
<ul>
<li><strong>OFF</strong> - Indique qu&rsquo;aucun message n&rsquo;est journalisé.</li>
<li><strong>ALL</strong> - Indique que tous les messages sont journalisés.</li>
</ul>
<p>Bien-sûr, ces niveaux sont proposés de base dans Skitools, mais rien ne
vous empêche de créer les vôtres.</p>
<h2 id="journalisation-dun-message">Journalisation d&rsquo;un message<a hidden class="anchor" aria-hidden="true" href="#journalisation-dun-message">#</a></h2>
<p>Pour journaliser un message plusieurs méthodes de l&rsquo;objet Logger
s&rsquo;offrent à vous :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-actionscript" data-lang="actionscript"><span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Level</span>.<span style="color:#a6e22e">DEBUG</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;petit message de débug&#34;</span>);
<span style="color:#75715e">// la même chose via la méthode debug
</span><span style="color:#75715e"></span><span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">debug</span>(<span style="color:#e6db74">&#34;petit message de débug&#34;</span>);
</code></pre></div><p>Bien-sûr ces deux fonctionnements sont applicables pour les 4 autres
niveaux : <strong>INFO</strong>, <strong>WARN</strong>, <strong>ERROR</strong>, et <strong>FATAL</strong>. Il est possible de
spécifier un objet <strong>IFormatter</strong> pour un message en particulier. Nous
verrons ce que sont les formatters dans la suite de cet article.</p>
<h2 id="sorties-décriture-du-système-de-journalisation">Sorties d&rsquo;écriture du système de journalisation<a hidden class="anchor" aria-hidden="true" href="#sorties-décriture-du-système-de-journalisation">#</a></h2>
<p>Nous avons vu comment créer des messages associés à un niveau.
Maintenant voyons comment les envoyer vers les différentes sorties
d&rsquo;écritures proposées par Skitools. Ces sorties sont représentées par
l&rsquo;interface <strong>org.skitools.logger.layout.ILayout</strong>. A ce jour 4 implémentations sont fournies avec Skitools :</p>
<ul>
<li><strong>org.skitools.logger.layout.TraceLayout</strong> - Les messages sont envoyés vers la méthode <strong>trace</strong> de Flash. Le plugin <a href="https://addons.mozilla.org/en-US/firefox/addon/3469/">FlashTracer</a> de Firefox vous permet de récupérer la sortie en écriture de la fonction <em>trace</em>.</li>
<li><strong>org.skitools.logger.layout.AirLoggerLayout</strong> - Les messages sont envoyés vers l&rsquo;application Air <a href="http://code.google.com/p/airlogger/">AirLogger</a> développé par <a href="http://book.abe.free.fr/blog/">Cédric Néhémie</a> (un ancien collègue de chez Prizee).</li>
<li><strong>org.skitools.logger.layout.FlashInspectorLayout</strong> - Les messages sont envoyés vers l&rsquo;application Flash FlashInspector développé par <a href="http://www.luminicbox.com">Pablo Constantini</a>.</li>
<li><strong>org.skitools.logger.layout.FireBugLayout</strong> - Les messages sont envoyés vers l&rsquo;incontournable plugin <a href="http://getfirebug.com/">FireBug</a> de Firefox. Bien entendu votre SWF doit être lu via le navigateur pour que les messages apparaissent dans le module &ldquo;Console&rdquo; du plugin.</li>
</ul>
<p>Nous verrons dans la suite de l&rsquo;article la mise en place de ces différents layouts.</p>
<h2 id="mise-en-forme-des-messages">Mise en forme des messages<a hidden class="anchor" aria-hidden="true" href="#mise-en-forme-des-messages">#</a></h2>
<p>Skitools permet de formater les messages de journalisation. Cette action
se réalise avant leur envoi vers un layout. La mise en forme des
messages se fait par les classes implémentant l&rsquo;interface
<strong>org.skitools.logger.formatter.IFormatter</strong>. Ces objets sont associés
aux layouts. Skitools vous propose 2 formatters :</p>
<ul>
<li><strong>org.skitools.logger.formatter.SimpleFormatter</strong> - Un formatter très simple : il passe au layout le corps du message tel qui l&rsquo;est. Ce formatter est utilisé par défaut par tous les layouts.</li>
<li><strong>org.skitools.logger.formatter.PatternFormatter</strong> - Ce formatter est plus avancé dans son fonctionnement. Celui-ci prend en paramètre de son constructeur un pattern (sous forme de String) qui va définir la forme que va prendre le message une fois envoyé au layout.</li>
</ul>
<p>Exemple pour le pattern <strong>%L [%C] %M</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-actionscript" data-lang="actionscript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">logger</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">Logger</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Logger</span>.<span style="color:#a6e22e">getLogger</span>(<span style="color:#e6db74">&#34;root&#34;</span>);
<span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">debug</span>(<span style="color:#e6db74">&#34;Message A&#34;</span>);
<span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">warn</span>(<span style="color:#e6db74">&#34;Message B&#34;</span>);
</code></pre></div><p>résultat :</p>
<pre tabindex="0"><code>DEBUG [root] Message A
WARN [root] Message B
</code></pre><p>Tableau récapitulatif des balises :</p>
<table>
<thead>
<tr>
<th style="text-align:center">Balise</th>
<th>Résultat</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>%C</strong></td>
<td>Le nom du logger émetteur du message</td>
</tr>
<tr>
<td style="text-align:center"><strong>%D</strong></td>
<td>La date d&rsquo;émission du message. Cette balise est un peu particulière car elle accepte une option : <strong>%D{dd/MM/yyyy - HH:mm:ss}</strong> Cette option permet de spécifier comme la date sera affichée. Cette option est analysée à l&rsquo;aide la classe <strong>org.skitools.utils.DateFormatter</strong> je vous conseille donc de jeter un coup d&rsquo;oeil à la documentation de cette dernière</td>
</tr>
<tr>
<td style="text-align:center"><strong>%L</strong></td>
<td>Le niveau du message</td>
</tr>
<tr>
<td style="text-align:center"><strong>%M</strong></td>
<td>Le corps du message</td>
</tr>
</tbody>
</table>
<h2 id="lhéritage-des-niveaux">L&rsquo;héritage des niveaux<a hidden class="anchor" aria-hidden="true" href="#lhéritage-des-niveaux">#</a></h2>
<p>Dans Skitools chaque Logger hérite du Level de son parent à moins bien
sur qu&rsquo;on lui est explicitement spécifié un Level. Seul le logger
&ldquo;root&rdquo;, défini par le système, ne possède pas de parent. Ce qui induit
que par défaut tous les logger héritent du Level du &ldquo;root&rdquo;. Prenons l&rsquo;exemple suivant :</p>
<p><img loading="lazy" src="/images/heritage-logger.jpg" alt="Héritage logger"  />
</p>
<p>Dans cet exemple nous spécifions que <strong>root</strong> à le niveau <strong>WARN</strong>. Ses héritiers (<strong>org</strong> et <strong>org.skitools</strong>) héritent tous de ce même level.
En spécifiant que **org.skitools.mvc **à un niveau d'<strong>INFO</strong> on casse la chaîne d&rsquo;héritage, donc lui et ses héritiers (<strong>org.skitools.mvc.view</strong>) auront le niveau <strong>INFO</strong>.
<strong>com.scopart.utils</strong> devrait par défaut avoir le niveau <strong>WARN</strong> (héritage de <strong>root</strong>), mais comme pour **org.skitools.mvc **on casse la chaîne d&rsquo;héritage en spécifiant <strong>FATAL</strong> comme niveau.
Si <strong>com.scopart.utils</strong> a un jour des enfants, ils hériteront donc de ce même niveau.</p>
<p>Voyons maintenant ce qui se passe si par exemple le logger <strong>org.skitools</strong> émet un message :</p>
<ul>
<li>Les messages <strong>DEBUG</strong> et <strong>INFO</strong> ne seront pas journalisés car ils possèdent un niveau inférieur à celui spécifié dans <strong>org.skitools</strong> (<strong>WARN</strong>).</li>
<li>Les messages <strong>WARN</strong>, <strong>ERROR</strong> et <strong>FATAL</strong> seront journalisés car ils sont supérieur ou égal à celui spécifié dans <strong>org.skitools</strong>.</li>
</ul>
<h2 id="configuration-du-système-de-journalisation">Configuration du système de journalisation<a hidden class="anchor" aria-hidden="true" href="#configuration-du-système-de-journalisation">#</a></h2>
<p>Voici un petit exemple de configuration du système de journalisation de
Skitools :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-actionscript" data-lang="actionscript"><span style="color:#66d9ef">package</span> <span style="color:#a6e22e">com</span>.<span style="color:#a6e22e">scopart</span>
{
    <span style="color:#66d9ef">import</span> <span style="color:#a6e22e">org</span>.<span style="color:#a6e22e">skitools</span>.<span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">Level</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">import</span> <span style="color:#a6e22e">org</span>.<span style="color:#a6e22e">skitools</span>.<span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">Logger</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">import</span> <span style="color:#a6e22e">org</span>.<span style="color:#a6e22e">skitools</span>.<span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">Logging</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">import</span> <span style="color:#a6e22e">org</span>.<span style="color:#a6e22e">skitools</span>.<span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">formatter</span>.<span style="color:#a6e22e">PatternFormatter</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">import</span> <span style="color:#a6e22e">org</span>.<span style="color:#a6e22e">skitools</span>.<span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">FirebugLayout</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">import</span> <span style="color:#a6e22e">org</span>.<span style="color:#a6e22e">skitools</span>.<span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">TraceLayout</span><span style="color:#f92672">;</span>

    <span style="color:#66d9ef">import</span> <span style="color:#a6e22e">flash</span>.<span style="color:#a6e22e">display</span>.Sprite<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MaClasse</span> <span style="color:#66d9ef">extends</span> Sprite
    {
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">logger</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">Logger</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Logger</span>.<span style="color:#a6e22e">getLogger</span>(<span style="color:#a6e22e">MaClasse</span>);

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">MaClasse</span>()
        {
            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">logging</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">Logging</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Logging</span>.<span style="color:#a6e22e">getInstance</span>();

            <span style="color:#75715e">// enregistrement d&#39;un TraceLayout dans le système.
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// Il utilisera par défaut org.skitools.logger.formatter.SimplementFormatter
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">addLayout</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TraceLayout</span>());
            <span style="color:#75715e">// enregistrement d&#39;un FirebugLayout dans le système.
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// Il utilisera un PatternFormatter pour mettre en forme les messages
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">addLayout</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">FirebugLayout</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PatternFormatter</span>(<span style="color:#e6db74">&#34;%L [%C] %M&#34;</span>)));

            <span style="color:#75715e">// on spécifie un level pour le logger MaClasse
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">Logger</span>.<span style="color:#a6e22e">getLogger</span>(<span style="color:#a6e22e">MaClasse</span>).<span style="color:#a6e22e">setLevel</span>(<span style="color:#a6e22e">Level</span>.<span style="color:#a6e22e">ERROR</span>);

            <span style="color:#75715e">// ce message ne sera journalisé car inférieur
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// à ERROR spécifié dans le Logger
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">debug</span>(<span style="color:#e6db74">&#34;message 1&#34;</span>);

            <span style="color:#75715e">// les deux messages suivant seront journalisé
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// car supérieur ou égal à ERROR
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;message 2&#34;</span>);
            <span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">fatal</span>(<span style="color:#e6db74">&#34;message 3&#34;</span>);
        }
    }
}
</code></pre></div><h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>Ce tutoriel touche à sa fin, j&rsquo;espère qu&rsquo;il vous aura permis de mieux
appréhender le système de journalisation proposé par Skitools. Un
tutoriel sur la partie MVC devrait voir le jour d&rsquo;ici peu. Si vous avez
des corrections ou suggestions concernant cet article ou le framework
Skitools, merci de me les faire parvenir en commentaire.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="https://www.skitoo.net">Alexis Couronne</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
